# 검색 도메인 모델 설계

## 개요
검색 서비스는 사용자가 상품을 찾기 위한 다양한 방법을 제공하는 도메인입니다. 키워드 검색, 필터링, 정렬, 자동완성 등의 기능을 통해 사용자 경험을 향상시킵니다.

---

## 도메인 모델

### 검색 조건 (SearchCriteria)
*Value Object*

사용자의 검색 의도를 표현하는 불변 객체

#### 속성
- WIP

#### 행위
- WIP

---

### 페이징 (Pagination)
*Value Object*

검색 결과 페이징 처리

#### 속성
- `page` : 페이지 번호 (int, 0부터 시작)
- `size` : 페이지 크기 (int)

#### 행위
- `static of(int page, int size)` : 팩토리 메서드
- `offset()` : 오프셋 계산
- `validate()` : 유효한 페이징인지 검증
---


## 도메인 서비스

### 검색 쿼리 빌더 (SearchQueryBuilder)
*Domain Service*

검색 조건을 Elasticsearch 쿼리로 변환

#### 책임
- 검색 조건을 ElasticSearch 쿼리로 변환
- 복잡한 쿼리 로직 캡슐화
- 쿼리 최적화 로직 적용

#### 주요 메서드
- `buildQuery(SearchCriteria criteria)` : 메인 쿼리 생성
- `buildKeywordQuery(String keyword)` : 키워드 검색 쿼리
- `buildFilterQuery(List<SearchFilter> filters)` : 필터 쿼리
- `buildSortQuery(SortOption sortOption)` : 정렬 쿼리

---

## 규칙 (Invariants)

### 검색 조건 관련
- 키워드는 최소 1자 이상이어야 한다 (공백 제외)
- 페이지 번호는 0 이상이어야 한다
- 페이지 크기는 1 이상 100 이하여야 한다
- 가격 범위에서 최소값은 최대값보다 작거나 같아야 한다

### 자동완성 관련
- 접두어는 최소 1자 이상이어야 한다
- 최대 제안 수는 1 이상 50 이하여야 한다

### 검색 결과 관련
- 전체 결과 수는 0 이상이어야 한다
- 검색 소요 시간은 음수가 될 수 없다

---





